<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Spring GraphQL Workshop</title>

    <link rel="stylesheet" href="slides/reveal.js/dist/reset.css">
    <link rel="stylesheet" href="slides/reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="slides/reveal.js/dist/theme/solarized.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="slides/highlight-js-github-theme.css">
    <link rel="stylesheet" href="slides/styles.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-state="title">
          <h2 class="title" style="font-size: 7rem;">
            <b>Spring GraphQL Workshop</b>
          </h2>

          <h3>
            <span class="transparent-bg">
              20. April 2022
            </span>
          </h3>

          <h4>
            <span class="transparent-bg">
              <a href="https://nilshartmann.net" target="_blank">Nils Hartmann</a> |
              <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
            </span>
          </h4>

          <p style="margin-top: 4rem;"></p>
          <div>
            <h3><span class="transparent-bg">Slides</span></h3>
            <p>
              <span class="transparent-bg">Lokal: 2022_04_20_spring-graphql.html</span>
            </p>
          </div>
        </section>
        <section>
          <h2>Nils Hartmann</h2>
          <p>
            <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a> /
            <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
          <p><em>Freiberuflicher Software-Entwickler, Berater und Trainer aus Hamburg</em></p>

          <div style="display: flex; justify-content: center;">
            <div>
              <p>Java</p>
              <p>JavaScript, TypeScript</p>
              <p>React</p>
              <p>Single-Page-Applications</p>
              <p>GraphQL</p>
              <p style="margin-top: 20px;">
                <a href="https://reacttraining.dev">Schulungen und Workshops</a>
              </p>
            </div>
            <div style="margin-left: 15px;">
              <a href="https://reactbuch.de"
              ><img
                  style="max-height: 450px;"
                  src="slides/images/react-buch-v2.jpg"
              /><br/>https://reactbuch.de</a
              >
              <br/>
            </div>
          </div>
        </section>

        <section data-markdown>
  <textarea data-template>
    ## Die Beispiel-Anwendung

    ---
    ## Beispiel: Tooling mit GraphiQL und IntelliJ IDEA

    ---
    ## Architektur Beispiel-Anwendung

    ### todo !!!!!!!!!!!!!
  </textarea>
        </section>
        <section data-markdown>
  <textarea data-template>
# Die GraphQL Abfrage-Sprache
---

### Sprache, um **Felder** aus einem **Objekt-Graphen** abzufragen

```graphql
  query {
    story {
      id title writtenBy {
        id user { name }
      }
    }
  }

---

### Felder können **Argumente** haben

<pre><code data-line-numbers="3" class="graphql">
  query {
    story(storyId: 5) {
      id title writtenBy {
        id user { name }
      }
    }
  }
</code></pre>

---

### Die **Antwort** sieht immer so aus, wie die Abfrage

<img src="/slides/images/query-antwort.png" />

---

### Operation-Type

Ausgeführt werden **Operationen.
Der **Operation-Type** beschreibt, was in der Anfrage getan werden soll

* **query**: Daten lesen (Default-Operation, Schlüsselwort "query" kann weggelassen werden)
* **mutation**: Daten verändern
* **subscription**: Daten vom Server bekommen, sobald sie erzeugt wurden (ähnlich wie Events)

---


### Operation-Type

Der Operation-Type bestimmt auch den Einstiegspunkt in den Objekt-Graphen
<img height="480px" src="/slides/images/einstiegspunkte.png" />

---

### Namen von Operationen

* Operationen können **Namen** haben.
* Das ist vor allem für Debugging und Code-Generatoren relevant

<pre><code class="graphql" data-line-numbers="2|2-10">
query NewestStory {
    story {
      id
      title
    }
}
</code></pre>

---

### Fragmente

Mit einem **Fragment** beschreibst Du eine wiederverwendbare Menge von Feldern
<pre><code class="graphql">
fragment BaseMember on Member {
    id joined
    user { is username }
}

query {
    story {
      writtenBy { ...BaseMember }

      reactions {
        givenBy { ...BaseMember }
      }
    }
}
</code></pre>

---

### Union-Typen

Ein **Union-Type** kann mehr als einen Typ zurückliefern:

<pre><code class="graphql" data-line-numbers="5,9">
mutation  addComment
    (input: { storyId: "1", content: "..." }) {

    ...on AddCommentSuccessPayload {
      newComment { id }
    }

    ...on AddCommentFailurePayload {
      errorMessage
    }
}
</code></pre>

---
### Interfaces

Ein Interface erzwingt gemeinsame Felder an den Objekten, die das Interface implementieren (ähnlich
    wie in Java mit Methoden)

* Beispiel: `id` und `createdAt` sind am `Node`-Interface definiert

<pre><code class="graphql">
query {
    node(id: "...") {

      id
      createdAt

      ...on Story { title body }
      ...on Comment { content }
    }
}
</code></pre>


---

### Variablen

* Queries können **Variablen** haben.
* Variablen müssen im Query deklariert werden
* Werte für Variablen werden in einem eigenen JSON-Objekt an den Server geschickt

<pre><code class="graphql" data-line-numbers="2|3|1-10">query ($storyId: ID!) {
    story(id: $storyId) {
      id
      title body
    }
}
</code></pre>

  </textarea>
        </section>

      </div>
    </div>
    <script src="slides/reveal.js/dist/reveal.js"></script>
    <script src="slides/reveal.js/plugin/notes/notes.js"></script>
    <script src="slides/reveal.js/plugin/markdown/markdown.js"></script>
    <script src="slides/reveal.js/plugin/highlight/highlight.js"></script>
    <script src="slides/config.js"></script>
  </body>
</html>
